(this["webpackJsonpreact-drum-machine"]=this["webpackJsonpreact-drum-machine"]||[]).push([[0],{155:function(e,t,n){"use strict";n.r(t);var i=n(9),c=n(8),r=n.n(c),o=n(18),a=n.n(o),s=(n(69),n(11)),l=n(10),u=n(28),d=["KICK","SNARE","HI-HAT","H-Tom","M-Tom","L-Tom"],j=Object(c.createContext)(),b=j.Provider,h=function(e){var t=e.children,n=x();return Object(i.jsx)(b,{value:n,children:t})},f=function(){return Object(c.useContext)(j)},x=function(){var e=d.map((function(e){return{name:e,stepList:new Array(16).fill(0)}})),t=Object(u.a)(e),n=Object(l.a)(t,2),i=n[0],r=n[1],o=Object(c.useState)(0),a=Object(l.a)(o,2),j=a[0],b=a[1],h=Object(c.useState)(0),f=Object(l.a)(h,2);return{stepLists:i,updateStep:function(e,t,n){r((function(i){i[e].stepList[t]=n}))},currentStep:j,setCurrentStep:b,resetSteps:function(){r((function(){return e}))},selectInst:f[0],setSelectInst:f[1],genRandomSteps:function(){r((function(e){var t,n=Object(s.a)(e);try{for(n.s();!(t=n.n()).done;){t.value.stepList=m(16)}}catch(i){n.e(i)}finally{n.f()}}))}}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Array.from({length:e},(function(){return Math.random()>=.8?Math.random():0}))},v="#454A55",p="#DEDBDA",g="#FC924F",O="#14F396",y="#0a794b",w=function(e,t,n){return{width:"6.25%",height:"10px",boxShadow:"1px 1px 1px #9E9E9E",backgroundColor:t&&e>0?"#ffff00":t&&0===e?"#FC924F":e>.9?y:e>0?O:"transparent"}},C=function(e){e.index;var t=e.velocity,n=e.isCurrent;return Object(i.jsx)("div",{style:w(t,n)})},k={position:"relative",width:"70vw",minWidth:"400px",maxWidth:"500px",backgroundColor:p},S={display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},E=function(){var e=f(),t=e.stepLists,n=e.updateStep,c=e.currentStep;return Object(i.jsx)("div",{style:k,children:t.map((function(e,t){return Object(i.jsx)("div",{style:S,children:e.stepList.map((function(e,r){return Object(i.jsx)(C,{index:r,velocity:e,handleClick:function(i){n(t,r,e>0?0:.8)},handleDoubleClick:function(){n(t,r,1)},isCurrent:r===c},r)}))},t)}))})},R=n(12),L=function(e){var t=e.volumn,n=Object(c.useMemo)((function(){return(new R.b).toDestination()}),[]);return n.volume.value=t,{trigger:Object(c.useCallback)((function(e,t,i){n.triggerAttackRelease("G1",e,t,i)}),[])}},I=function(e){var t=e.volumn,n=Object(c.useMemo)((function(){return new R.c({noise:{type:"brown",playbackRate:3},envelope:{decay:.1,sustain:.02}}).toDestination()}),[]),i=Object(c.useMemo)((function(){return new R.b({volume:-5}).toDestination()}),[]);return n.volume.value=t+10,i.volume.value=t,{trigger:Object(c.useCallback)((function(e,t,c){i.triggerAttackRelease("G1",e,t,c),n.triggerAttackRelease(e,t,c)}),[])}},T=function(e){var t=e.volumn,n=Object(c.useMemo)((function(){return new R.c({playbackRate:5,envelope:{sustain:1e-4}}).toDestination()}),[]);return n.volume.value=t-5,{trigger:Object(c.useCallback)((function(e,t,i){n.triggerAttackRelease(e,t,i)}),[])}},D=function(e){var t=e.volumnH,n=e.volumnM,i=e.volumnL,r=Object(c.useMemo)((function(){return new R.b({octaves:1}).toDestination()}),[]),o=Object(c.useMemo)((function(){return new R.b({octaves:1}).toDestination()}),[]),a=Object(c.useMemo)((function(){return new R.b({octaves:1}).toDestination()}),[]);return r.volume.value=i,o.volume.value=n,a.volume.value=t,{floorTomTrigger:Object(c.useCallback)((function(e,t,n){r.triggerAttackRelease("E2",e,t,n)}),[i]),midTomTrigger:Object(c.useCallback)((function(e,t,n){o.triggerAttackRelease("G2",e,t,n)}),[n]),highTomTrigger:Object(c.useCallback)((function(e,t,n){a.triggerAttackRelease("A#2",e,t,n)}),[t])}},M=Object(c.createContext)(),A=M.Provider,V=function(e){var t=e.children,n=N();return Object(i.jsx)(A,{value:n,children:t})},P=function(){return Object(c.useContext)(M)},F=[{name:"DrumPad",hint:Object(i.jsxs)("p",{children:["Click: normal.",Object(i.jsx)("br",{})," Double Click: accentuation"]})},{name:"Mixer",hint:Object(i.jsx)("p",{children:"max:30 dB, min:-30dB"})}],N=function(){var e=Object(c.useState)(0),t=Object(l.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(1),o=Object(l.a)(r,2),a=(o[0],o[1],Object(u.a)(new Array(d.length).fill(0))),s=Object(l.a)(a,2),j=s[0],b=s[1];return{mainIdx:n,currViewName:F[n].name,currViewHint:F[n].hint,mainViewNext:function(){n+1<F.length&&i((function(e){return e+1}))},mainViewPrev:function(){n>0&&i((function(e){return e-1}))},hasNext:n+1<F.length,hasPrev:n>0,volumns:j,setVolumns:b}},H=function(e){var t=e.bpm,n=P().volumns;R.e.bpm.value=t;var i=f(),r=i.stepLists,o=i.setCurrentStep,a=L({volumn:n[0]}).trigger,s=I({volumn:n[1]}).trigger,d=T({volumn:n[2]}).trigger,j=D({volumnH:n[3],volumnM:n[4],volumnL:n[5]}),b=j.floorTomTrigger,h=j.midTomTrigger,x=j.highTomTrigger,m=Object(u.a)([]),v=Object(l.a)(m,2),p=v[0],g=v[1],O=Object(c.useCallback)((function(e,t,n){return R.e.schedule((function(i){t[n].stepList.forEach((function(t,n){t>0&&e("16n",i+n*R.d("16n").toSeconds(),t),R.a.schedule((function(){o(n)}),i+n*R.d("16n").toSeconds())}))}),"0")}),[]);return Object(c.useEffect)((function(){!function(){for(var e=function(){var e=Object(l.a)(n[t],2),i=e[0],c=void e[1];switch(p[i]&&R.e.clear(p[i]),i){case"0":c=O(a,r,i);break;case"1":c=O(s,r,i);break;case"2":c=O(d,r,i);break;case"3":c=O(x,r,i);break;case"4":c=O(h,r,i);break;case"5":c=O(b,r,i)}R.e.setLoopPoints(0,"1m"),R.e.loop=!0,g((function(e){e[i]=c}))},t=0,n=Object.entries(r);t<n.length;t++)e()}()}),[r]),{now:R.f()}},W=n(5),B=n(14),G={width:"30px",height:"30px",border:"none",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",outline:"none",outlineOffset:"none"},z=function(e){var t=e.children,n=e.onClick,r=Object(B.a)(e,["children","onClick"]),o=Object(c.useRef)();return Object(i.jsx)("button",Object(W.a)(Object(W.a)({ref:o,style:G,onClick:function(e){o.current.blur(),n()}},r),{},{children:t}))},J=n(62),K=n(19),Y=(n(47),n.p+"static/media/play.1b4fe477.svg"),q=n.p+"static/media/stop.11946cce.svg",Q=n.p+"static/media/reset.53fc7500.svg",U=n.p+"static/media/random.f88822cb.svg",X=n.p+"static/media/next.4a867727.svg",Z=n.p+"static/media/prev.059d5327.svg",$={display:"flex",alignItems:"center",width:"70vw",height:"50px",minWidth:"400px",maxWidth:"500px",maxHeight:"50px",overflow:"scroll",backgroundColor:p},_={marginRight:"10px"},ee={width:"40px",height:"20px",backgroundColor:"transparent",border:"none",outline:"none",outlineOffset:"none"},te={width:"120px",textAlign:"right",marginRight:"10px",fontSize:"20px"},ne={backgroundColor:"transparent"},ie=[20,200],ce=function(){var e=Object(c.useState)(90),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(!1),a=Object(l.a)(o,2),s=(a[0],a[1],H({bpm:n}).now,f()),u=s.genRandomSteps,d=s.resetSteps,j=P(),b=j.currViewName,h=j.currViewHint,x=j.mainViewNext,m=j.mainViewPrev,v=j.hasNext,p=j.hasPrev;return Object(c.useEffect)((function(){var e=function(e){"Space"===e.code&&(R.g(),R.e.toggle())};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}})),Object(i.jsxs)("div",{style:$,children:[Object(i.jsx)(K.a,{overlay:Object(i.jsx)("input",{style:ee,placeholder:"BPM",type:"number",min:"1",onChange:function(e){var t=parseFloat(e.target.value);t>=ie[0]&&t<=ie[1]?r(parseFloat(e.target.value)):t<ie[0]?r(ie[0]):t>ie[1]&&r(ie[1])},value:n}),overlayInnerStyle:ne,placement:"bottom",children:Object(i.jsx)("div",{style:_,children:Object(i.jsx)(J.a,{hits:n,withBorder:!1,withGlow:!1,minLength:3,size:30,padding:4,digitSpacing:3,segmentThickness:3,segmentSpacing:.5,segmentActiveColor:"red",segmentInactiveColor:"#5c2e2e",backgroundColor:"#222222"})})}),Object(i.jsx)(K.a,{overlay:"Play",placement:"bottom",children:Object(i.jsx)("div",{style:_,children:Object(i.jsx)(z,{onClick:function(){R.g(),R.e.start()},children:Object(i.jsx)("img",{src:Y,alt:"play",width:"15px"})})})}),Object(i.jsx)(K.a,{overlay:"Stop",placement:"bottom",children:Object(i.jsx)("div",{style:_,children:Object(i.jsx)(z,{onClick:function(){R.e.pause()},children:Object(i.jsx)("img",{src:q,alt:"Stop",width:"15px"})})})}),Object(i.jsx)(K.a,{overlay:"Reset",placement:"bottom",children:Object(i.jsx)("div",{style:_,children:Object(i.jsx)(z,{onClick:function(){d()},children:Object(i.jsx)("img",{src:Q,alt:"Reset",width:"15px"})})})}),Object(i.jsx)(K.a,{overlay:"Generate Random Pattern",placement:"bottom",children:Object(i.jsx)("div",{style:_,children:Object(i.jsx)(z,{onClick:function(e){u()},children:Object(i.jsx)("img",{src:U,alt:"RandomSteps",width:"15px"})})})}),Object(i.jsx)("div",{style:_,children:p&&Object(i.jsx)(K.a,{overlay:"Previous View",placement:"bottom",children:Object(i.jsx)(z,{onClick:function(){m()},children:Object(i.jsx)("img",{src:Z,alt:"prevView",width:"15px"})})})}),Object(i.jsx)("div",{style:_,children:v&&Object(i.jsx)(K.a,{overlay:"Next View",placement:"bottom",children:Object(i.jsx)(z,{onClick:function(){x()},children:Object(i.jsx)("img",{src:X,alt:"nextView",width:"15px"})})})}),Object(i.jsx)(K.a,{overlay:h,placement:"bottom",children:Object(i.jsx)("div",{style:te,children:b})})]})},re=function(e){var t=e.ref,n=e.latency,i=void 0===n?200:n,r=e.onSingleClick,o=void 0===r?function(){return null}:r,a=e.onDoubleClick,s=void 0===a?function(){return null}:a;Object(c.useEffect)((function(){var e=t.current,n=0,c=function(e){n+=1,setTimeout((function(){1===n?o(e):2===n&&s(e),n=0}),i)};return e.addEventListener("click",c),function(){e.removeEventListener("click",c)}}))},oe=function(e){return{width:"24%",height:"24%",boxShadow:"1px 1px 1px #9E9E9E",flexShrink:"1",flexGrow:"1",backgroundColor:e>.9?y:e>0?O:"transparent"}},ae=function(e){e.index;var t=e.velocity,n=e.handleClick,r=(e.isCurrent,e.handleDoubleClick),o=Object(c.useRef)();return re({onSingleClick:n,onDoubleClick:r,ref:o,latency:250}),Object(i.jsx)("div",{ref:o,style:oe(t)})},se={width:"100px",height:"100%",borderLeft:"1px solid ".concat(v)},le=function(e){return{height:"30px",boxShadow:"1px 1px 1px #9E9E9E",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",color:e?g:v,backgroundColor:e?v:"transparent",fontWeight:e?900:400}},ue=function(){var e=f(),t=e.selectInst,n=e.setSelectInst;return Object(i.jsx)("div",{style:se,children:d.map((function(e,c){return Object(i.jsx)(de,{onClick:function(){n(c)},selected:t===c,children:e},c)}))})},de=function(e){var t=e.children,n=e.selected,c=Object(B.a)(e,["children","selected"]);return Object(i.jsx)("div",Object(W.a)(Object(W.a)({style:le(n)},c),{},{children:t}))},je={width:"100%",height:"100%",display:"flex"},be={width:"100%",height:"100%",display:"flex",flexWrap:"wrap"},he=function(){var e=f(),t=e.stepLists,n=e.updateStep,c=(e.currentStep,e.selectInst);return Object(i.jsxs)("div",{style:je,children:[Object(i.jsx)("div",{style:be,children:t[c].stepList.map((function(e,t){return Object(i.jsx)(ae,{index:t,velocity:e,handleClick:function(i){n(c,t,e>0?0:.8)},handleDoubleClick:function(){n(c,t,1)}},t)}))}),Object(i.jsx)(ue,{})]})},fe={position:"relative",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"flex-end"},xe={position:"relative",display:"flex",justifyContent:"center",alignItems:"flex-end",width:"10%",height:"100%",marginRight:"1%"},me={position:"absolute",zIndex:"999",top:"50%",width:"50px",fontWeight:"800"},ve={position:"absolute",top:"20px",right:"20px"},pe=function(e){return{width:"100%",height:"".concat(ye(e),"%"),backgroundColor:g,display:"flex",justifyContent:"center",alignItems:"flex-end"}},ge=function(){var e=P(),t=e.volumns,n=e.setVolumns;return Object(i.jsxs)("div",{style:fe,children:[Object(i.jsx)(K.a,{overlay:"Reset Volumes",children:Object(i.jsx)("div",{style:ve,children:Object(i.jsx)(z,{onClick:function(e){n((function(){return Array.from({length:t.length},(function(){return 0}))}))},children:Object(i.jsx)("img",{src:Q,alt:"RandomSteps",width:"15px"})})})}),t.map((function(e,t){return Object(i.jsx)(Oe,{idx:t,vol:e,setVolumns:n},t)}))]})},Oe=function(e){var t=e.idx,n=e.vol,r=e.setVolumns,o=Object(c.useState)(!1),a=Object(l.a)(o,2),s=a[0],u=a[1];return Object(i.jsx)("div",{onMouseEnter:function(){u(!0)},onMouseLeave:function(){u(!1)},style:xe,onClick:function(e){var n=e.clientY-e.currentTarget.parentElement.offsetTop;r((function(e){e[t]=we(n)}))},children:Object(i.jsxs)("div",{style:pe(n),children:[s&&Object(i.jsxs)("div",{style:me,children:[d[t],Object(i.jsx)("div",{className:"num",children:Math.round(10*n)/10})]}),s&&Object(i.jsx)("div",{style:me,children:" "})]})})},ye=function(e){return 100*(e+30)/60},we=function(e){return 2*(450-e)/9*30/50-30},Ce={width:"70vw",height:"450px",minWidth:"400px",maxWidth:"500px",maxHeight:"450px",backgroundColor:p},ke=function(){var e=P().mainIdx;return Object(i.jsxs)("div",{style:Ce,children:[0===e&&Object(i.jsx)(he,{}),1===e&&Object(i.jsx)(ge,{})]})},Se=n(63),Ee=n.n(Se),Re=function(e){var t=Object(c.useState)(null),n=Object(l.a)(t,2),i=n[0],r=n[1];return Object(c.useEffect)((function(){fetch(e).then((function(e){return e.text()})).then((function(e){r(e)}))}),[e]),{md:i}},Le={width:"800px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},Ie=function(){var e=Re("https://raw.githubusercontent.com/hhow09/react-drum-machine/master/README.md").md;return Object(i.jsxs)("div",{style:Le,children:[Object(i.jsx)("h1",{children:"React Drum Machine"}),Object(i.jsxs)(h,{children:[Object(i.jsx)(E,{}),Object(i.jsxs)(V,{children:[Object(i.jsx)(ke,{}),Object(i.jsx)(ce,{})]})]}),Object(i.jsx)("div",{className:"readme",children:Object(i.jsx)(Ee.a,{children:e})})]})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,156)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),i(e),c(e),r(e),o(e)}))};n.p;a.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(Ie,{})}),document.getElementById("root")),Te()},69:function(e,t,n){}},[[155,1,2]]]);